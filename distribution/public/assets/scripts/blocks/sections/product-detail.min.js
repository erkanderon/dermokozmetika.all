define(["vendors/jquery.$$.min","vendors/jquery.min","vendors/jquery-loading.min","vendors/jquery-swiper.min","vendors/jquery-validate.min","vendors/underscore.min"],{data:{swiper:{autoHeight:!0,lazyLoading:!0,onlyExternal:!1,observer:!0,observeParents:!0,preloadImages:!1}},elements:{$campaigns_area:"#product-detail-section-block-campaigns-area",$comments_area:"#product-detail-section-block-comments-area",$form:"#product-detail-section-block-form",$form2:"#product-detail-section-block-2-form",$gifts_swiper:"#product-detail-section-block-gifts-swiper",$offers_and_vouchers_swiper:"#product-detail-section-block-offers-and-vouchers-swiper"},events:{form:function(e){return e.preventDefault(),$.ajax(_.extend(blocks.sections["product-detail"].requests.add_to_cart,{data:$$(this).serializeArray(),success:function(e){return e.status?(fbq("track","AddToCart",{content_ids:[e.addedProduct.id],content_type:"product",value:e.addedProduct.price,currency:"TRY"}),gtag("event","add_to_cart",{ecomm_pagetype:"cart",ecomm_prodid:[e.addedProduct.sku],ecomm_totalvalue:e.addedProduct.price,isMember:0!==MEMBER_INFO.ID,gender:MEMBER_INFO.GENDER}),$$("#product-detail-section-block-add-to-cart-modal").modal(),$$fresh(".modal-backdrop").detach().appendTo(".mm-page"),$$("#main-header-cover-block-area").text(e.totalQuantity)):alert(e.statusText.replace(/<(?:.|\n)*?>/gm,""))}}))}},init:function(){$(".ribbon-clickable").on("click",function(){return $("body, html").animate({scrollTop:$("#product-detail-section-block-campaigns-area").offset().top-64},300),$(this).hasClass("ribbon-outline-success")?$('a[href="#product-detail-section-block-gifts-tab"]').trigger("click"):$('a[href="#product-detail-section-block-offers-and-vouchers-tab"]').trigger("click")}),$.ajax(_.extend(this.requests.get_campaigns,{success:function(e){return blocks.sections["product-detail"].renders.campaigns_area(function(e){return $$fresh(e.$campaigns_area).loading("hide")},e,{$campaigns_area:blocks.sections["product-detail"].elements.$campaigns_area,$gifts_swiper:blocks.sections["product-detail"].elements.$gifts_swiper,$offers_and_vouchers_swiper:blocks.sections["product-detail"].elements.$offers_and_vouchers_swiper},blocks.sections["product-detail"].data.swiper,blocks.sections["product-detail"].templates.campaigns_area)},url:"/srv/campaign-v2/campaign/get-list-by-type/product/"+blocks.sections["product-detail"].data.id})),$$(this.elements.$form).on("submit",this.events.form),$$(this.elements.$form2).validate(),$.ajax(_.extend(this.requests.get_comments,{success:function(e){return blocks.sections["product-detail"].renders.comments_area(blocks.sections["product-detail"].elements.$comments_area,function(e){return $$(e).loading("hide")},e)},url:"/srv/service/product-detail/comments/"+blocks.sections["product-detail"].data.id}))},renders:{campaigns_area:function(e,t,a,o,r){var s,i;$$(a.$campaigns_area).replaceWith(soda(r,t)),t.CAMPAIGN_LIST&&(i=t.CAMPAIGN_LIST.length>1?$$(a.$offers_and_vouchers_swiper).find(".swiper-container").swiper(_.extend(o,{autoplay:3e3,loop:!0,pagination:a.$offers_and_vouchers_swiper+" .swiper-pagination",paginationClickable:!0})):$$(a.$offers_and_vouchers_swiper).find(".swiper-container").swiper(o)).container.hover(i.stopAutoplay,i.startAutoplay),(s=$$(a.$gifts_swiper).find(".swiper-container").swiper(_.extend(o,{autoplay:3e3,loop:!0,pagination:a.$gifts_swiper+" .swiper-pagination",paginationClickable:!0}))).container.hover(s.stopAutoplay,s.startAutoplay),$$fresh(a.$campaigns_area).find('[data-toggle="popover"]').popover({trigger:"hover"}),e(a)},comments_area:function(e,t,a,o){void 0===o&&(blocks.sections["product-detail"].templates.comments_area=o=$.ajax(blocks.sections["product-detail"].requests.get_template).responseText),$$(e).html(soda(o,a)),$$("#product-detail-section-block-3-form").validate({submitHandler:function(e){$.ajax({beforeSend:function(){return $$("#product-detail-section-block-3-form").find(".btn").loading()},complete:function(){return $$("#product-detail-section-block-3-form").find(".btn").loading("hide")},data:$(e).serializeArray(),dataType:"json",url:"/srv/service/product-detail/comment/"+blocks.sections["product-detail"].data.id,success:function(e){if(e.status)return new Noty({layout:"bottomCenter",text:"Yorumunuz başarıyla kaydedildi. Onaylandıktan sonra işleme alınacaktır.",theme:"bootstrap-v4",type:"success"}).show(),$$("#product-detail-section-block-3-form").find(".btn").attr("disabled",!0)},type:"post"})}}),t(e)}},requests:{add_to_cart:{dataType:"json",type:"POST",url:"/srv/service/cart/add-to-cart"},get_campaigns:{dataType:"json"},get_comments:{dataType:"json"},get_template:{async:!1,url:"/srv/service/content/get/1004/comment"}},templates:{campaigns_area:$$("#product-detail-section-block-campaigns-area")[0].outerHTML}});