define(["vendors/bootstrap-show-password.min","vendors/i18next.min","vendors/jquery.$$.min","vendors/jquery.min","vendors/jquery-loading.min","vendors/jquery-validate.min","vendors/underscore.min"],{data:{password:{eyeClass:"fa",eyeCloseClass:"fa-eye-slash",eyeOpenClass:"fa-eye"}},elements:{$a:"#login-widget-block-a",$btn:"#login-widget-block-btn",$div:"#login-widget-block-div",$form:"#login-widget-block-form",$input:"#login-widget-block-password-input"},events:{a:function(e){e.preventDefault(),$.ajax(_.extend(blocks.widgets.login.requests.logout,{beforeSend:function(){return $$(blocks.widgets.login.elements.$a).loading()},success:function(){return location.reload()}}))}},init:function(){$$(this.elements.$div).length>0&&this.renders.div(function(e){return $$(e.$div).loading("hide")},{firstname:MEMBER_INFO.FIRST_NAME,lastname:MEMBER_INFO.LAST_NAME,title:"E"===MEMBER_INFO.GENDER&&$.t("mr")},{$a:this.elements.$a,$div:this.elements.$div},this.events.a,this.templates.div),$$(this.elements.$form).length>0&&(this.validate=$$(this.elements.$form).validate({submitHandler:function(e){$.ajax(_.extend(blocks.widgets.login.requests.login,{beforeSend:function(){return $$(blocks.widgets.login.elements.$btn).loading()},data:$$(e).serializeArray(),success:function(e){return e.status?(fbq("trackCustom","UserData",{customer_id:e.customer_id,gender:""}),location.href=e.url):(blocks.widgets.login.validate.showErrors({email_address:e.statusText}),$$(blocks.widgets.login.elements.$btn).loading("hide"))},url:"/srv/service/customer/login/"+$$(e).serializeObject().email_address}))}}),$$(this.elements.$input).password(this.data.password))},renders:{div:function(e,t,s,i,n){$$(s.$div).html(soda(n,t)).find(s.$a).on("click",i),e(s)}},requests:{login:{dataType:"json",type:"post"},logout:{url:"/srv/service/customer/logout"}},templates:{div:$$("#login-widget-block-div").html()}});