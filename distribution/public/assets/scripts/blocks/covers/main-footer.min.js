define(["vendors/jquery.$$.min","vendors/jquery.min","vendors/jquery-loading.min","vendors/jquery-validate.min","vendors/underscore.min"],{elements:{$block:"#main-footer-cover-block",$btn:"#main-footer-cover-block-btn",$form:"#main-footer-cover-block-form"},events:{window:function(){return $$("body").height()<$$("html").height()?$$(blocks.covers["main-footer"].elements.$block).addClass("fixed-block"):$$(blocks.covers["main-footer"].elements.$block).removeClass("fixed-block")},form:function(e){return $.ajax(_.extend(blocks.covers["main-footer"].requests.subscribe,{beforeSend:function(){return $$(blocks.covers["main-footer"].elements.$btn).loading()},complete:function(){return $$(blocks.covers["main-footer"].elements.$btn).loading("hide")},data:$$(e).serializeObject(),success:function(e){return fbq("track","Lead"),1===e.status?($$(blocks.covers["main-footer"].elements.$btn).attr("disabled",!0),new Noty({layout:"bottomCenter",text:"E-posta adresiniz başarıyla kaydedildi.",theme:"bootstrap-v4",type:"success"}).show()):new Noty({layout:"bottomCenter",text:"Bu e-posta adresi kullanılamaz. Lütfen başka bir e-posta adresi deneyiniz.",theme:"bootstrap-v4",type:"error"}).show()}})),!1}},init:function(){$$(window).on("resize",this.events.window).trigger("resize"),$$(this.elements.$form).validate({submitHandler:blocks.covers["main-footer"].events.form})},requests:{subscribe:{dataType:"json",type:"post",url:"/srv/service/guest/subscribeNewsletter"}}});