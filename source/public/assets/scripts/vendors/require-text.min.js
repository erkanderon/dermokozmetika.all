define(["module"],function(e){"use strict";function m(e,t){return void 0===e||""===e?t:e}function g(e,t,i,n){if(t===n)return!0;if(e===i){if("http"===e)return m(t,"80")===m(n,"80");if("https"===e)return m(t,"443")===m(n,"443")}return!1}var t,i,n,a,r,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,f=u&&location.protocol&&location.protocol.replace(/\:/,""),c=u&&location.hostname,d=u&&(location.port||void 0),h={},p=e.config&&e.config()||{};return t={version:"2.0.15",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=s[t];try{e=new ActiveXObject(i)}catch(n){}if(e){s=[i];break}}return e},parseName:function(e){var t,i,n,a=!1,r=e.lastIndexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!s||r>1)?(t=e.substring(0,r),i=e.substring(r+1)):t=e,n=i||t,r=n.indexOf("!"),-1!==r&&(a="strip"===n.substring(r+1),n=n.substring(0,r),i?i=n:t=n),{moduleName:t,ext:i,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,a){var r,s,o,l=t.xdRegExp.exec(e);return l?(r=l[2],s=l[3],s=s.split(":"),o=s[1],s=s[0],(!r||r===i)&&(!s||s.toLowerCase()===n.toLowerCase())&&(!o&&!s||g(r,o,i,a))):!0},finishLoad:function(e,i,n,a){n=i?t.strip(n):n,p.isBuild&&(h[e]=n),a(n)},load:function(e,i,n,a){if(a&&a.isBuild&&!a.inlineText)return void n();p.isBuild=a&&a.isBuild;var r=t.parseName(e),s=r.moduleName+(r.ext?"."+r.ext:""),o=i.toUrl(s),l=p.useXhr||t.useXhr;return 0===o.indexOf("empty:")?void n():void(!u||l(o,f,c,d)?t.get(o,function(i){t.finishLoad(e,r.strip,i,n)},function(e){n.error&&n.error(e)}):i([s],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,n)}))},write:function(e,i,n,a){if(h.hasOwnProperty(i)){var r=t.jsEscape(h[i]);n.asModule(e+"!"+i,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,i,n,a,r){var s=t.parseName(i),o=s.ext?"."+s.ext:"",l=s.moduleName+o,u=n.toUrl(s.moduleName+o)+".js";t.load(l,n,function(i){var n=function(e){return a(u,e)};n.asModule=function(e,t){return a.asModule(e,u,t)},t.write(e,l,n,r)},r)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var a=i.readFileSync(e,"utf8");"\ufeff"===a[0]&&(a=a.substring(1)),t(a)}catch(r){n&&n(r)}}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,i,n,a){var s,r=t.createXhr();if(r.open("GET",e,!0),a)for(s in a)a.hasOwnProperty(s)&&r.setRequestHeader(s.toLowerCase(),a[s]);p.onXhr&&p.onXhr(r,e),r.onreadystatechange=function(t){var a,s;4===r.readyState&&(a=r.status||0,a>399&&600>a?(s=new Error(e+" HTTP status: "+a),s.xhr=r,n&&n(s)):i(r.responseText),p.onXhrComplete&&p.onXhrComplete(r,e))},r.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,a="utf-8",r=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),a)),l="";try{for(i=new java.lang.StringBuffer,n=o.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=o.readLine());)i.append(s),i.append(n);l=String(i.toString())}finally{o.close()}t(l)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,s,o,l={};r&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),i.init(o,1,0,!1),s=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),s.init(i,"utf-8",i.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(i.available(),l),s.close(),i.close(),t(l.value)}catch(u){throw new Error((o&&o.path||"")+": "+u)}}),t});