define(["vendors/bootstrap-slider.min","vendors/jquery.$$.min","vendors/jquery.min","vendors/jquery-loading.min","vendors/jquery-mmenu-all.min","vendors/jquery-perfect_scrollbar.min","vendors/underscore.min"],{data:{mmenu:{dividers:{add:!0,addTo:"#filters-widget-block-brands-mm-listview, #filters-widget-block-colors-mm-listview"},extensions:["fx-menu-slide","fx-panels-slide-100","pagedim-black","shadow-panels","theme-white"],navbars:[{content:'<button class="btn btn-block btn-primary" data-i18n="[title]apply;apply" id="filters-widget-block-btn" title="Uygula" type="button">Uygula</button>',position:"bottom"}],offCanvas:{position:"right",zposition:"front"},onClick:{setSelected:!1},searchfield:{add:!0,addTo:"#filters-widget-block-brands-mm-listview, #filters-widget-block-colors-mm-listview",clear:!0},sectionIndexer:{add:!0,addTo:"#filters-widget-block-brands-mm-listview, #filters-widget-block-colors-mm-listview"}},perfect_scrollbar:{suppressScrollX:!0},url:URI()},elements:{$block:"#filters-widget-block",$btn:"#filters-widget-block-btn",$custom_control:".filters-widget-block-custom-control",$dt:"#filters-widget-block-dt",$list_unstyled:".filters-widget-block-list-unstyled",$mm_menu:"#filters-widget-block-mm-menu",$price_range_input:"#filters-widget-block-price-range-input"},events:{btn:function(){return location.href=blocks.widgets.filters.data.url.readable()},custom_control:{custom_control_input:function(){var e;return location.href=blocks.widgets.filters.functions.build_url(!$$fresh(this).is(":checked"),e=$$(this).closest(blocks.widgets.filters.elements.$list_unstyled).data("key"),("multi"===e||"single"===e)&&" "||"-",URI(),$$(this).val())}},mmenu:{toggle:function(){var e;return blocks.widgets.filters.data.url=blocks.widgets.filters.functions.build_url(!$$fresh(this).is(":checked"),e=$$(this).closest(".mm-listview").data("key"),("multi"===e||"single"===e)&&" "||"-",blocks.widgets.filters.data.url,$$(this).val())}},price_range_input:{slide:function(e){return blocks.widgets.filters.renders.dt(blocks.widgets.filters.elements.$dt,{PRICE:{MAX_SELECTED:e.value[1],MIN_SELECTED:e.value[0]}},blocks.widgets.filters.templates.dt)},slide_stop:function(e){return location.href=e.value[0]!==$$(this).data("slider-min")||e.value[1]!==$$(this).data("slider-max")?URI().setQuery("price",e.value[0]+"-"+e.value[1]).readable():URI().hasQuery("price")?URI().removeQuery("price").readable():void 0}}},functions:{build_url:function(e,t,i,s,l){return URI(s).hasQuery(t,!0)?e?URI(s).removeQuery("pg").setQuery(t,_.without(URI(s).query(!0)[t].split(i),l).join(i)):URI(s).removeQuery("pg").setQuery(t,_.union(URI(s).query(!0)[t].split(i),[l]).join(i)):URI(s).removeQuery("pg").setQuery(t,l)}},init:function(){return $.ajax(_.extend(this.requests.get_filters,{url:URI("/srv/service/filter/get/filters-variants-brands-categories-price").search(URI().search()).addQuery("link",URI().filename()).readable(),success:function(e){return _.each(e.CATEGORIES,function(t){if("450"===t.ID)return e.CATEGORIES=_.without(e.CATEGORIES,t)}),blocks.widgets.filters.renders.block(function(e){return $$(e.$block).loading("hide")},e,blocks.widgets.filters.elements,blocks.widgets.filters.events,blocks.widgets.filters.data.mmenu,blocks.widgets.filters.data.perfect_scrollbar,blocks.widgets.filters.templates.block)}}))},renders:{block:function(e,t,i,s,l,r,n){$$(i.$block).html(soda(n,t)).find(".list-unstyled").perfectScrollbar(r),$$fresh(i.$custom_control).find(".custom-control-input").on("change",s.custom_control.custom_control_input),$$(i.$price_range_input).slider().on("slide",s.price_range_input.slide).on("slideStop",s.price_range_input.slide_stop),$$(i.$mm_menu).mmenu(l).find(".mm-toggle").on("change",s.mmenu.toggle),$$(i.$btn).on("click",s.btn),e(i)},dt:function(e,t,i){return $$fresh(e).html(soda(i,t))}},requests:{get_filters:{dataType:"json"}},templates:{block:$$("#filters-widget-block").html(),dt:$$("#filters-widget-block-dt").html()}});